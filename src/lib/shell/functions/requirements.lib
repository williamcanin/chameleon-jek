#!/bin/bash

function _REQUIREMENTS(){
if [[ "$(id -u)" != 0 ]]; then
  msg_warning "Use root"
  exit 1
else

  LOGNAME=$(users | awk '{print $1}')
  SEARCH_USER_SUDO=$(grep "$LOGNAME ALL=(ALL:ALL) ALL" /etc/sudoers)
  if [[ -z "$SEARCH_USER_SUDO" ]]; then
    echo "$LOGNAME ALL=(ALL:ALL) ALL" >> /etc/sudoers
  fi

  msg_header "Requirements install ..."
  sleep 2
  if [[ -f "/usr/bin/apt" ]] && [[ ! -f "/usr/bin/yum" ]]; then
    apt-get update
    apt-get install git git-core ruby-full nodejs ssh openssh-server openssh-client npm python
  elif [[ -f "/usr/bin/yum" ]] && [[ -f "/usr/bin/dnf" ]]; then
    dnf install git ruby ruby-devel rubygems openssh nodejs npm python
  elif [[ -f "/usr/bin/yum" ]]; then
    yum install git ruby ruby-devel rubygems openssh nodejs npm python
  elif [[ -f "/usr/bin/pacman" ]]; then
    pacman -Sy git ruby nodejs npm python
  else
    msg_error "No support your distribution Linux."
    exit 0
  fi
  msg_finish "Requirements install. Done!"

  if [ -e "/usr/bin/nodejs" ] && [ ! -e "/usr/bin/node" ]; then
    ln -s /usr/bin/nodejs /usr/bin/node
  fi

  BOWER_CHECK=$(bower -version | cut -d'.' -f1)
  NUMERIC="?(+|-)+([0-9])"
  if [[ "$BOWER_CHECK" != $NUMERIC ]]; then
    msg_header "Bower install ..."
    sleep 2
    npm install -g bower
    msg_finish "Bower install. Done!\n"
  fi

  GULP_CHECK=$(gulp -version | cut -d'n' -f2 | awk '{print $1}' | cut -d'.' -f1 | sed "2d")
  if [[ "$GULP_CHECK" != $NUMERIC ]]; then
    msg_header "Gulp install ..."
    sleep 2
    npm install -g gulp
    msg_finish "Gulp install. Done!"
  fi

fi
}